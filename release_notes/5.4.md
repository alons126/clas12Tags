# clas12_tags 5.4 compatible with COATJAVA 6.5.6.1? and above.

- RF Frequency > RF Period 
- read RF parameters from DB if RFSETUP is set to `clas12_ccdb`
- RICH digitization (Connor Pecar, upcoming)

Standardized fadc time and tdc as follows:

```
	int fadc_time = convert_to_precision(time_in_ns);
	int tdc = time_in_ns/a1;
```

where
```
	double fadc_precision = 0.0625;  // 62 picoseconds resolution
	int convert_to_precision(double tdc) {
		return (int( tdc / fadc_precision ) / fadc_precision);
	}
```

1. time to tdc constants from CCDB 
2. verify time_to_tdc used in LUND background when applicable
2. fadc_time comes from convert_to_precision (time_in_ns) 

| detector | CCDB table                   | 
|----------|------------------------------|
| band     |                              | 
| cnd      | /calibration/cnd/TDC_conv    | 
| ctof     | /calibration/ctof/tdc_conv   |
| ecal     | /calibration/ec/timing (a1)  |
| ft_cal   |                              | 
| ft_hodo  |                              | 
| ftof     | /calibration/ftof/tdc_conv   |
| htcc     |                              | 
| ltcc     |                              | 
| rich     |                              | 
| rtpc     |                              | 



- the following options are added/updated in the gcard:

  - SAVE_ALL_MOTHERS=1
  - SKIPREJECTEDHITS=1
  - INTEGRATEDRAW=“*”


                                                                                                                                                                                                             

This does not change the single electrons events memory, about ~1.0g 
or the corresponding running time for 2000 events on ifarm, 
from 437 seconds (4.58Hz) to  581 seconds (3.44Hz), a 25% 
reduction due to saving and looping over all tracks for each event.



<br>

### To load production tag 5.3 at JLab, use the following commands:

```
source /group/clas12/packages/setup.csh
module load clas12
module switch gemc/5.4
```

### To load production tag 5.3 in docker, use the following commands:

```
source $SIM_HOME/setup.csh
module load clas12
module switch gemc/5.4
```

<br>
   